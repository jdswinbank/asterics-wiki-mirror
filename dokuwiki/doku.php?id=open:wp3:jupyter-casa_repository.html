<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>open:wp3:jupyter-casa_repository [ASTERICS Wiki pages]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2017-06-01T14:32:47+0200"/>
<meta name="keywords" content="open,wp3,jupyter-casa_repository"/>
<link rel="search" type="application/opensearchdescription+xml" href="lib/exe/opensearch.php" title="ASTERICS Wiki pages"/>
<link rel="start" href="index.html"/>
<link rel="contents" href="./doku.php%3Fid=open:wp3:jupyter-casa_repository&amp;do=index.html" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="./feed.php%3Fmode=list&amp;ns=open:wp3"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="./doku.php%3Fdo=export_xhtml&amp;id=open:wp3:jupyter-casa_repository.html"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="./doku.php%3Fdo=export_raw&amp;id=open:wp3:jupyter-casa_repository"/>
<link rel="canonical" href="./doku.php%3Fid=open:wp3:jupyter-casa_repository.html"/>
<link rel="stylesheet" type="text/css" href="lib/exe/css.php%3Ft=dokuwiki&amp;tseed=3e868cdb9e6faaec34cd57ca71666f47.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='open:wp3';var JSINFO = {"id":"open:wp3:jupyter-casa_repository","namespace":"open:wp3"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="lib/exe/js.php%3Ftseed=3e868cdb9e6faaec34cd57ca71666f47&amp;template=dokuwiki"></script>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="lib/tpl/dokuwiki/images/favicon.ico" />
<link rel="apple-touch-icon" href="lib/tpl/dokuwiki/images/apple-touch-icon.png" />
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dokuwiki     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="./doku.php%3Fid=open:wp3:jupyter-casa_repository.html#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="doku.php%3Fid=start.html"  accesskey="h" title="[H]"><img src="lib/exe/fetch.php%3Fmedia=wiki:logo.png" width="228" height="161" alt="" /> <span>ASTERICS Wiki pages</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="./doku.php%3Fid=open:wp3:jupyter-casa_repository&amp;do=login&amp;sectok=3b82d5bb13546913c7150cfa5cef1861.html"  class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="doku.php%3Fid=start.html" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="index.html" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="open:wp3:jupyter-casa_repository" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option></optgroup></select><input type="submit" value="&gt;" /></div></form>            </div>
            <ul>
                <li><a href="./doku.php%3Fid=open:wp3:jupyter-casa_repository&amp;do=recent.html"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="./doku.php%3Fid=open:wp3:jupyter-casa_repository&amp;do=media&amp;ns=open:wp3.html"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="./doku.php%3Fid=open:wp3:jupyter-casa_repository&amp;do=index.html"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                                        <div class="trace"><span class="bchead">Trace:</span> <span class="bcsep">•</span> <bdi><a href="./doku.php%3Fid=multi:start.html"  class="breadcrumbs" title="multi:start">multi</a></bdi> <span class="bcsep">•</span> <bdi><a href="./doku.php%3Fid=open:gen:start.html"  class="breadcrumbs" title="open:gen:start">gen</a></bdi> <span class="bcsep">•</span> <bdi><a href="./doku.php%3Fid=open:wp1:start.html"  class="breadcrumbs" title="open:wp1:start">wp1</a></bdi> <span class="bcsep">•</span> <bdi><a href="./doku.php%3Fid=open:wp2:start.html"  class="breadcrumbs" title="open:wp2:start">wp2</a></bdi> <span class="bcsep">•</span> <bdi><a href="./doku.php%3Fid=open:wp3:start.html"  class="breadcrumbs" title="open:wp3:start">wp3</a></bdi> <span class="bcsep">•</span> <bdi><a href="./doku.php%3Fid=open:wp4:start.html"  class="breadcrumbs" title="open:wp4:start">wp4</a></bdi> <span class="bcsep">•</span> <bdi><a href="./doku.php%3Fid=open:wp5:start.html"  class="breadcrumbs" title="open:wp5:start">wp5</a></bdi> <span class="bcsep">•</span> <bdi><a href="./doku.php%3Fid=open:wp1:reports.html"  class="breadcrumbs" title="open:wp1:reports">reports</a></bdi> <span class="bcsep">•</span> <bdi><a href="./doku.php%3Fid=open:wp3:d-ana_software_repository.html"  class="breadcrumbs" title="open:wp3:d-ana_software_repository">d-ana_software_repository</a></bdi> <span class="bcsep">•</span> <span class="curid"><bdi><a href="./doku.php%3Fid=open:wp3:jupyter-casa_repository.html"  class="breadcrumbs" title="open:wp3:jupyter-casa_repository">jupyter-casa_repository</a></bdi></span></div>
                    </div>
    
    
    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>open:wp3:jupyter-casa_repository</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="./doku.php%3Fid=open:wp3:jupyter-casa_repository.html#jupyter-casa_repository">Jupyter-CASA repository</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="./doku.php%3Fid=open:wp3:jupyter-casa_repository.html#introduction">Introduction</a></div></li>
<li class="level2"><div class="li"><a href="./doku.php%3Fid=open:wp3:jupyter-casa_repository.html#installation">Installation</a></div></li>
<li class="level2"><div class="li"><a href="./doku.php%3Fid=open:wp3:jupyter-casa_repository.html#usage">Usage</a></div></li>
<li class="level2"><div class="li"><a href="./doku.php%3Fid=open:wp3:jupyter-casa_repository.html#examples">Examples</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="jupyter-casa_repository">Jupyter-CASA repository</h1>
<div class="level1">

</div>

<h2 class="sectionedit2" id="introduction">Introduction</h2>
<div class="level2">

<p>
The size of astronomical datasets has increased dramatically over the years; terabyte sized datasets are no longer an exception. This trend will only accelerate; the SKA is expected to produce nearly 1 TB of archived data each day. This means that it will no longer be feasible for astronomers to download these huge datasets and perform the data reduction on their own machines, as is currently the practice. Instead the data reduction is likely to be done close to where the data is archived in central data processing centres, with the astronomer operating remotely on the data.
</p>

<p>
One way of facilitating this is through <a href="http://jupyter.org/" class="urlextern" title="http://jupyter.org/"  rel="nofollow">Jupyter</a> notebooks. Jupyter is a web-based application which allows users to create interactive notebooks which can include annotated text and graphics as well as executable code. Currently Jupyter supports more than 40 different programming languages, including Python, R, and Matlab. Jupyter is designed be extended and makes it easy to add additional languages.
</p>

<p>
As part of the Obelics work-package we have created a Jupyter kernel for <a href="https://casa.nrao.edu/" class="urlextern" title="https://casa.nrao.edu/"  rel="nofollow">CASA</a>, a widely-used software package for processing astronomical data. The kernel allows all CASA tasks to be run from inside a Jupyter notebook, albeit non-interactively. Tasks which normally spawn a <abbr title="Graphical User Interface">GUI</abbr> window are wrapped so that their output is saved to an image instead, which is then displayed inside the notebook. 
</p>

<p>
The notebook format also has the great advantage that all steps of the data reduction are preserved inside the notebook. This means that the whole data reduction process is self-documenting and fully repeatable. It also allows users to very easily make changes to their pipeline and then rerun the pipeline steps affected.
</p>

</div>

<h2 class="sectionedit3" id="installation">Installation</h2>
<div class="level2">

<p>
Because Jupyter requires a much more current python distibution than what is provided in NRAO&#039;s CASA releases, a custom build of CASA is required. We distribute a DOCKER image containing a version of CASA which uses the most recent (I)python, matplotlib, etc. Note that this version of CASA can only be used from within Jupyter.
</p>

<p>
Installation is a simple as executing: <code>docker pull penngwyn/jupytercasa</code>
</p>

<p>
The source code is located here: <a href="https://github.com/aardk/jupyter-casa" class="urlextern" title="https://github.com/aardk/jupyter-casa"  rel="nofollow">https://github.com/aardk/jupyter-casa</a>
</p>

</div>

<h2 class="sectionedit4" id="usage">Usage</h2>
<div class="level2">

<p>
Even though we wrap all CASA tasks so that they will not launch a <abbr title="Graphical User Interface">GUI</abbr> window, the QT based CASA tasks still require X11, unfortunately. Tasks such as <em>plotms</em> won&#039;t start unless X11 is working even when it doesn&#039;t even open a window. Therefore the local X11 socket needs to be shared with Docker container.
</p>

<p>
The simplest incantation to start JUPYTER on a recent Ubuntu:
</p>

<p>
<code>
docker run –rm -p 8888:8888 -i -t -v /tmp/.X11-unix:/tmp/.X11-unix -e DISPLAY=$DISPLAY penngwyn/jupytercasa /bin/sh -c “jupyter notebook”
</code>
</p>

<p>
Note that the <code>–rm</code> option will make DOCKER delete the container after use.
</p>

<p>
Of course the above example is not very useful as the container will not be able to access locally stored measurement sets. To add a data directory to the DOCKER container is, fortunately, very simple using the <code>-v</code> option:
</p>

<p>
<code>
docker run –rm -p 8888:8888 -i -t -v /tmp/.X11-unix:/tmp/.X11-unix -e DISPLAY=$DISPLAY -v PATH_TO_DATA_DIR:/home/jupyter/data penngwyn/jupytercasa /bin/sh -c “jupyter notebook”
</code>
</p>

<p>
Where <code>PATH_TO_DATA_DIR</code> should be replaced with the full path to your local data directory.
</p>

</div>

<h2 class="sectionedit5" id="examples">Examples</h2>
<div class="level2">

<p>
We have created an example <a href="https://github.com/aardk/jupyter-casa/blob/master/examples/vla-cont-tutorial.ipynb" class="urlextern" title="https://github.com/aardk/jupyter-casa/blob/master/examples/vla-cont-tutorial.ipynb"  rel="nofollow">notebook</a> which contains the NRAO continuum VLA tutorial. To run the notebook locally download the data files from the <a href="https://casaguides.nrao.edu/index.php/VLA_Continuum_Tutorial_3C391-CASA4.7" class="urlextern" title="https://casaguides.nrao.edu/index.php/VLA_Continuum_Tutorial_3C391-CASA4.7"  rel="nofollow">NRAO wiki</a> and make the data available to the DOCKER container as is explained above.
</p>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>open/wp3/jupyter-casa_repository.txt</bdi> · Last modified: 2017/06/01 14:32 by <bdi>keimpema</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="./doku.php%3Fid=open:wp3:jupyter-casa_repository&amp;do=edit&amp;rev=0.html"  class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="./doku.php%3Fid=open:wp3:jupyter-casa_repository&amp;do=revisions.html"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="./doku.php%3Fid=open:wp3:jupyter-casa_repository&amp;do=backlink.html"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="./doku.php%3Fid=open:wp3:jupyter-casa_repository.html#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license" class="urlextern">CC Attribution-Share Alike 3.0 Unported</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="lib/images/license/button/cc-by-sa.png" alt="CC Attribution-Share Alike 3.0 Unported" /></a>        <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="lib/tpl/dokuwiki/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="lib/tpl/dokuwiki/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="lib/tpl/dokuwiki/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="lib/tpl/dokuwiki/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://www.debian.org" title="Run on Debian" ><img
            src="lib/tpl/dokuwiki/images/button-debian.png" width="80" height="15" alt="Run on Debian" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="lib/tpl/dokuwiki/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="lib/exe/indexer.php%3Fid=open:wp3:jupyter-casa_repository&amp;1680015272" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</body>
</html>
